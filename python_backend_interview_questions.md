# –¢–æ–ø-30 –í–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è Python Backend –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

–®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º –Ω–∞ –ø–æ–∑–∏—Ü–∏—é Python Backend Developer (Middle/Senior). –í–æ–ø—Ä–æ—Å—ã –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç: Python, Django/FastAPI, SQL, AWS, Redis, DynamoDB, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, BigData.

## üü¢ Python –∏ –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Django/FastAPI)

1. **–ß—Ç–æ —Ç–∞–∫–æ–µ GIL –∏ –∫–∞–∫ –æ–±—Ö–æ–¥–∏—Ç—å –µ–≥–æ –¥–ª—è CPU-bound –∑–∞–¥–∞—á?**

   **GIL (Global Interpreter Lock)** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤ CPython, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–π—Ç–∫–æ–¥ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –≤ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º.

   **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å:**
   - I/O-bound –∑–∞–¥–∞—á–∏ (—Å–µ—Ç—å, –¥–∏—Å–∫) ‚Äî GIL –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è, –ø–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
   - CPU-bound –∑–∞–¥–∞—á–∏ (–≤—ã—á–∏—Å–ª–µ–Ω–∏—è) ‚Äî –ø–æ—Ç–æ–∫–∏ –Ω–µ –¥–∞—é—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è, —Ç.–∫. GIL –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

   **–ö–∞–∫ –æ–±–æ–π—Ç–∏ –¥–ª—è CPU-bound:**
   ```python
   # 1. multiprocessing ‚Äî –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç —Å–≤–æ–π GIL
   from multiprocessing import Pool
   with Pool(4) as p:
       results = p.map(heavy_computation, data)

   # 2. concurrent.futures
   from concurrent.futures import ProcessPoolExecutor
   with ProcessPoolExecutor() as executor:
       results = executor.map(heavy_computation, data)
   ```

   **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cython/NumPy (–æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç GIL), –∏–ª–∏ PyPy/–¥—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—ã.

---

2. **asyncio: –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å async –≤–º–µ—Å—Ç–æ threads?**

   **Event Loop** ‚Äî —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ—Ä—É—Ç–∏–Ω. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥—ë—Ç I/O (`await`), event loop –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∫–æ—Ä—É—Ç–∏–Ω—É –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞.

   **async –ª—É—á—à–µ threads –∫–æ–≥–¥–∞:**
   - –ú–Ω–æ–≥–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π (—Ç—ã—Å—è—á–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
   - –ù—É–∂–Ω–∞ –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (–Ω–µ—Ç overhead –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤)
   - –†–∞–±–æ—Ç–∞ —Å async-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ (aiohttp, asyncpg)

   **threads –ª—É—á—à–µ –∫–æ–≥–¥–∞:**
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç async
   - CPU-bound –∑–∞–¥–∞—á–∏ (—Ö–æ—Ç—è –ª—É—á—à–µ multiprocessing)
   - –ü—Ä–æ—Å—Ç–æ–π –∫–æ–¥ –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

   ```python
   import asyncio
   import aiohttp

   async def fetch_all(urls):
       async with aiohttp.ClientSession() as session:
           tasks = [session.get(url) for url in urls]
           return await asyncio.gather(*tasks)

   # 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ 1000 –ø–æ—Ç–æ–∫–æ–≤
   asyncio.run(fetch_all(urls))
   ```

   **–í–∞–∂–Ω–æ:** async –Ω–µ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±—ã—Å—Ç—Ä–µ–µ ‚Äî –æ–Ω –¥–µ–ª–∞–µ—Ç –µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è I/O-bound –∑–∞–¥–∞—á –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

---

3. **Django vs FastAPI ‚Äî –∫–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å?**

   | –ö—Ä–∏—Ç–µ—Ä–∏–π | Django | FastAPI |
   |----------|--------|---------|
   | –¢–∏–ø | Full-stack —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ | –ú–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è API |
   | ORM | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Django ORM | –ù–µ—Ç (SQLAlchemy, Tortoise) |
   | Admin | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | –ù–µ—Ç |
   | Async | –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (Django 4.1+) | –ù–∞—Ç–∏–≤–Ω–∞—è |
   | –í–∞–ª–∏–¥–∞—Ü–∏—è | Django Forms | Pydantic (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) |
   | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†—É—á–Ω–∞—è | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è OpenAPI/Swagger |
   | –°–∫–æ—Ä–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |

   **–í—ã–±–∏—Ä–∞–π Django:**
   - –ù—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç —Å –∞–¥–º–∏–Ω–∫–æ–π
   - –ö–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–µ—Ç Django
   - Rapid prototyping —Å ORM –∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
   - –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

   **–í—ã–±–∏—Ä–∞–π FastAPI:**
   - –ß–∏—Å—Ç—ã–π REST/GraphQL API
   - –ù—É–∂–µ–Ω async (WebSocket, –º–Ω–æ–≥–æ I/O)
   - –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
   - –í–∞–∂–Ω–∞ –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

4. **Django ORM: N+1 –ø—Ä–æ–±–ª–µ–º–∞ –∏ –∫–∞–∫ –µ—ë —Ä–µ—à–∞—Ç—å?**

   **N+1 –ø—Ä–æ–±–ª–µ–º–∞** ‚Äî –∫–æ–≥–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ORM –¥–µ–ª–∞–µ—Ç 1 –∑–∞–ø—Ä–æ—Å –∑–∞ –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ + N –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç).

   ```python
   # –ü–õ–û–•–û: N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
   books = Book.objects.all()  # 1 –∑–∞–ø—Ä–æ—Å
   for book in books:
       print(book.author.name)  # N –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–Ω–∏–≥—É)

   # –•–û–†–û–®–û: 2 –∑–∞–ø—Ä–æ—Å–∞ —Å select_related (ForeignKey, OneToOne)
   books = Book.objects.select_related('author').all()
   for book in books:
       print(book.author.name)  # –î–∞–Ω–Ω—ã–µ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

   # –•–û–†–û–®–û: 2 –∑–∞–ø—Ä–æ—Å–∞ —Å prefetch_related (ManyToMany, reverse FK)
   authors = Author.objects.prefetch_related('books').all()
   for author in authors:
       print([b.title for b in author.books.all()])
   ```

   **–†–∞–∑–Ω–∏—Ü–∞:**
   - `select_related` ‚Äî JOIN –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ (–¥–ª—è FK/O2O)
   - `prefetch_related` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å + —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –≤ Python (–¥–ª—è M2M)

   **–ö–∞–∫ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:** django-debug-toolbar, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL, `connection.queries`.

---

5. **FastAPI: Pydantic –∏ Dependency Injection**

   **Pydantic** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ type hints. FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ request/response.

   ```python
   from pydantic import BaseModel, EmailStr
   from fastapi import FastAPI, Depends

   class UserCreate(BaseModel):
       email: EmailStr
       password: str
       age: int | None = None

   # –ê–≤—Ç–æ–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI —Å—Ö–µ–º—ã
   @app.post("/users")
   async def create_user(user: UserCreate):
       return {"email": user.email}
   ```

   **Dependency Injection** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `Depends()`. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É, —É–ø—Ä–∞–≤–ª—è—Ç—å lifecycle.

   ```python
   async def get_db():
       db = SessionLocal()
       try:
           yield db
       finally:
           db.close()

   async def get_current_user(token: str = Header(), db = Depends(get_db)):
       return db.query(User).filter(User.token == token).first()

   @app.get("/me")
   async def read_me(user: User = Depends(get_current_user)):
       return user
   ```

   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DI:** —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (–ª–µ–≥–∫–æ –º–æ–∫–∞—Ç—å), –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏.

---

## üü¢ SQL –∏ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

6. **–ò–Ω–¥–µ–∫—Å—ã: B-Tree, –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å, EXPLAIN**

   **B-Tree –∏–Ω–¥–µ–∫—Å** ‚Äî —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ü–æ–∏—Å–∫ –∑–∞ O(log n). –≠—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–∏–ø –∏–Ω–¥–µ–∫—Å–∞ –≤ PostgreSQL/MySQL.

   **–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å:**
   - –ö–æ–ª–æ–Ω–∫–∏ –≤ WHERE, JOIN, ORDER BY
   - –ö–æ–ª–æ–Ω–∫–∏ —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (–º–Ω–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)
   - –ß–∞—Å—Ç–æ —á–∏—Ç–∞–µ–º—ã–µ, —Ä–µ–¥–∫–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã

   **–ö–æ–≥–¥–∞ –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å:**
   - –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã (full scan –±—ã—Å—Ç—Ä–µ–µ)
   - –ö–æ–ª–æ–Ω–∫–∏ —Å –Ω–∏–∑–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (boolean, status)
   - –¢–∞–±–ª–∏—Ü—ã —Å —á–∞—Å—Ç—ã–º–∏ INSERT/UPDATE (–∏–Ω–¥–µ–∫—Å –∑–∞–º–µ–¥–ª—è–µ—Ç –∑–∞–ø–∏—Å—å)

   ```sql
   -- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
   CREATE INDEX idx_users_email ON users(email);

   -- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å (–ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!)
   CREATE INDEX idx_orders_user_date ON orders(user_id, created_at);

   -- EXPLAIN –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'test@example.com';
   -- Seq Scan = –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä (–ø–ª–æ—Ö–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü)
   -- Index Scan = –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å (—Ö–æ—Ä–æ—à–æ)
   ```

   **–í–∞–∂–Ω–æ:** —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å `(a, b)` —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ `a` –∏ `a + b`, –Ω–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–æ–ª—å–∫–æ –ø–æ `b`.

---

7. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏**

   **ACID:** Atomicity (–≤—Å—ë –∏–ª–∏ –Ω–∏—á–µ–≥–æ), Consistency (–¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã), Isolation (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –º–µ—à–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É), Durability (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞).

   **–£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏** (–æ—Ç —Å–ª–∞–±–æ–≥–æ –∫ —Å–∏–ª—å–Ω–æ–º—É):

   | –£—Ä–æ–≤–µ–Ω—å | Dirty Read | Non-repeatable Read | Phantom Read |
   |---------|------------|---------------------|--------------|
   | Read Uncommitted | –î–∞ | –î–∞ | –î–∞ |
   | Read Committed | –ù–µ—Ç | –î–∞ | –î–∞ |
   | Repeatable Read | –ù–µ—Ç | –ù–µ—Ç | –î–∞ (MySQL: –Ω–µ—Ç) |
   | Serializable | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç |

   - **Dirty Read** ‚Äî —á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - **Non-repeatable Read** ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞—ë—Ç –¥—Ä—É–≥–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∫—Ç–æ-—Ç–æ –æ–±–Ω–æ–≤–∏–ª)
   - **Phantom Read** ‚Äî –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º SELECT

   ```sql
   -- PostgreSQL: –¥–µ—Ñ–æ–ª—Ç Read Committed
   -- MySQL InnoDB: –¥–µ—Ñ–æ–ª—Ç Repeatable Read

   SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
   BEGIN;
   -- –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
   COMMIT;
   ```

   **–ü—Ä–∞–∫—Ç–∏–∫–∞:** Read Committed –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤. Serializable ‚Äî –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ).

---

8. **Aurora vs MySQL ‚Äî –∫–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Aurora?**

   **Amazon Aurora** ‚Äî –æ–±–ª–∞—á–Ω–∞—è –ë–î, —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å MySQL/PostgreSQL, –Ω–æ —Å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º storage layer.

   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Aurora:**
   - **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –¥–æ 5x –±—ã—Å—Ç—Ä–µ–µ MySQL –Ω–∞ write, 3x –Ω–∞ read
   - **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –¥–æ 15 read replicas —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π <10ms
   - **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** 6 –∫–æ–ø–∏–π –¥–∞–Ω–Ω—ã—Ö –≤ 3 AZ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover –∑–∞ <30 —Å–µ–∫
   - **Storage:** –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ 128 TB, –æ–ø–ª–∞—Ç–∞ –ø–æ —Ñ–∞–∫—Ç—É
   - **Serverless:** Aurora Serverless –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

   **–ö–æ–≥–¥–∞ MySQL (RDS):**
   - –ë—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (Aurora –¥–æ—Ä–æ–∂–µ)
   - –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å MySQL
   - –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ HA
   - –ù—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ storage (EBS)

   **–ö–æ–≥–¥–∞ Aurora:**
   - –ü—Ä–æ–¥–∞–∫—à–Ω —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (99.99%)
   - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ read (–º–Ω–æ–≥–æ —Ä–µ–ø–ª–∏–∫)
   - –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (Serverless)
   - –í–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å recovery –ø–æ—Å–ª–µ —Å–±–æ—è

---

9. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî —á–µ–∫–ª–∏—Å—Ç**

   **1. –ù–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É:**
   ```sql
   -- –í–∫–ª—é—á–∏—Ç—å slow query log (MySQL)
   SET GLOBAL slow_query_log = 'ON';
   SET GLOBAL long_query_time = 1;

   -- PostgreSQL: pg_stat_statements
   SELECT query, mean_time, calls FROM pg_stat_statements ORDER BY mean_time DESC;
   ```

   **2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω:**
   ```sql
   EXPLAIN ANALYZE SELECT ...
   -- –°–º–æ—Ç—Ä–∏–º: Seq Scan –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, –≤—ã—Å–æ–∫–∏–π cost, –º–Ω–æ–≥–æ rows
   ```

   **3. –ß–µ–∫–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (WHERE, JOIN, ORDER BY)
   - [ ] –£–±—Ä–∞—Ç—å `SELECT *` ‚Äî –≤—ã–±–∏—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
   - [ ] –ò–∑–±–µ–≥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö: `WHERE YEAR(date) = 2024` ‚Üí `WHERE date >= '2024-01-01'`
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å N+1 –≤ ORM (—Å–º. –≤–æ–ø—Ä–æ—Å 4)
   - [ ] –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è read-heavy —Ç–∞–±–ª–∏—Ü
   - [ ] –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
   - [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (Redis)

   **4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
   ```sql
   EXPLAIN ANALYZE SELECT ... -- –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Index Scan
   ```

---

## üü° Key-Value Stores –∏ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

10. **Redis: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ use cases**

    Redis ‚Äî in-memory key-value store —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

    | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –ö–æ–º–∞–Ω–¥—ã | Use Case |
    |-----------|---------|----------|
    | String | GET, SET, INCR | –ö–µ—à, —Å—á—ë—Ç—á–∏–∫–∏, —Å–µ—Å—Å–∏–∏ |
    | Hash | HGET, HSET, HGETALL | –û–±—ä–µ–∫—Ç—ã (user:123 ‚Üí {name, email}) |
    | List | LPUSH, RPOP, LRANGE | –û—á–µ—Ä–µ–¥–∏, –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —ç–ª–µ–º–µ–Ω—Ç–æ–≤ |
    | Set | SADD, SMEMBERS, SINTER | –¢–µ–≥–∏, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
    | Sorted Set | ZADD, ZRANGE, ZRANK | –õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã, timeline |
    | Stream | XADD, XREAD | Event streaming, –ª–æ–≥–∏ |

    ```python
    import redis
    r = redis.Redis()

    # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
    r.setex("user:123", 3600, json.dumps(user_data))

    # –õ–∏–¥–µ—Ä–±–æ—Ä–¥
    r.zadd("leaderboard", {"player1": 100, "player2": 85})
    r.zrevrange("leaderboard", 0, 9, withscores=True)  # Top 10

    # Rate limiting
    key = f"rate:{user_id}:{minute}"
    r.incr(key)
    r.expire(key, 60)
    ```

    **–ö–æ–≥–¥–∞ –ù–ï Redis:** –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ RAM, –Ω—É–∂–Ω–∞ durability (Redis –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ), —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (SQL).

---

11. **DynamoDB: –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö, partition key, GSI**

    **DynamoDB** ‚Äî serverless NoSQL –æ—Ç AWS. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–ø—Ä–æ—Å—ã.

    **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö:**
    - **Partition Key (PK)** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é (—à–∞—Ä–¥). –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—Å–æ–∫–æ–∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ã–º.
    - **Sort Key (SK)** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ–∑–≤–æ–ª—è–µ—Ç range queries –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
    - **–ê—Ç—Ä–∏–±—É—Ç—ã** ‚Äî –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, schemaless.

    ```python
    # –¢–∞–±–ª–∏—Ü–∞ Orders: PK=user_id, SK=order_date
    # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ: –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –ø–µ—Ä–∏–æ–¥
    table.query(
        KeyConditionExpression="user_id = :uid AND order_date BETWEEN :start AND :end"
    )
    ```

    **GSI (Global Secondary Index):**
    - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –¥—Ä—É–≥–∏–º PK/SK
    - –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∏–Ω–¥–µ–∫—Å (eventually consistent)
    - –°–≤–æ–π throughput, –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞

    ```python
    # GSI: PK=status, SK=created_at
    # –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ: –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "pending"
    table.query(
        IndexName="status-index",
        KeyConditionExpression="status = :s"
    )
    ```

    **–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã:** scan –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã, –≥–æ—Ä—è—á–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ (–æ–¥–∏–Ω PK –ø–æ–ª—É—á–∞–µ—Ç 90% —Ç—Ä–∞—Ñ–∏–∫–∞).

---

12. **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è: Cache-Aside, Write-Through, Write-Behind**

    **Cache-Aside (Lazy Loading):**
    ```python
    def get_user(user_id):
        # 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à
        cached = cache.get(f"user:{user_id}")
        if cached:
            return cached
        # 2. Cache miss ‚Äî —á–∏—Ç–∞–µ–º –∏–∑ –ë–î
        user = db.query(User).get(user_id)
        # 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
        cache.setex(f"user:{user_id}", 3600, user)
        return user
    ```
    **+** –ö–µ—à–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
    **-** Cache miss = –∑–∞–¥–µ—Ä–∂–∫–∞, –≤–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

    **Write-Through:**
    ```python
    def update_user(user_id, data):
        # 1. –û–±–Ω–æ–≤–∏—Ç—å –ë–î
        db.update(user_id, data)
        # 2. –°—Ä–∞–∑—É –æ–±–Ω–æ–≤–∏—Ç—å –∫–µ—à
        cache.set(f"user:{user_id}", data)
    ```
    **+** –ö–µ—à –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω
    **-** –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –¥–æ—Ä–æ–∂–µ, –∫–µ—à–∏—Ä—É—é—Ç—Å—è –¥–∞–∂–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

    **Write-Behind (Write-Back):**
    ```python
    def update_user(user_id, data):
        # 1. –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–µ—à
        cache.set(f"user:{user_id}", data)
        # 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ë–î (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å)
        queue.send({"action": "update", "user_id": user_id, "data": data})
    ```
    **+** –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å
    **-** –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ, —Å–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

13. **Cache Invalidation ‚Äî –ø–æ–¥—Ö–æ–¥—ã**

    > "There are only two hard things in CS: cache invalidation and naming things."

    **1. TTL (Time To Live):**
    ```python
    cache.setex("user:123", 300, data)  # –ò—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
    ```
    **+** –ü—Ä–æ—Å—Ç–æ—Ç–∞
    **-** –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL

    **2. –Ø–≤–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:**
    ```python
    def update_user(user_id, data):
        db.update(user_id, data)
        cache.delete(f"user:{user_id}")  # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º
    ```
    **+** –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã
    **-** –ù—É–∂–Ω–æ –∑–Ω–∞—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

    **3. Event-based invalidation:**
    ```python
    # –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—É–±–ª–∏–∫—É–µ–º —Å–æ–±—ã—Ç–∏–µ
    event_bus.publish("user.updated", {"user_id": 123})

    # –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É—é—Ç —Å–≤–æ–∏ –∫–µ—à–∏
    @subscribe("user.updated")
    def invalidate_user_cache(event):
        cache.delete(f"user:{event['user_id']}")
    ```

    **4. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π:**
    ```python
    version = cache.incr("user:123:version")
    cache.set(f"user:123:v{version}", data)
    # –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
    ```

    **–ü—Ä–∞–∫—Ç–∏–∫–∞:** –∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ TTL (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–∞–≥–æ–≤) + —è–≤–Ω—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é (–∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å).

---

## üü° AWS Services

14. **Lambda: —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç, –ª–∏–º–∏—Ç—ã, best practices**

    **–•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç** ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ Lambda (–∏–ª–∏ –ø–æ—Å–ª–µ –ø—Ä–æ—Å—Ç–æ—è). –í–∫–ª—é—á–∞–µ—Ç: –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é runtime, –≤–∞—à init-–∫–æ–¥.

    **–ö–∞–∫ —É–º–µ–Ω—å—à–∏—Ç—å:**
    - –ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä deployment package
    - –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ—Å–æ–±–µ–Ω–Ω–æ —Ç—è–∂—ë–ª—ã—Ö –≤—Ä–æ–¥–µ pandas)
    - Provisioned Concurrency (Lambda "–ø—Ä–æ–≥—Ä–µ—Ç–∞" –∑–∞—Ä–∞–Ω–µ–µ)
    - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤–Ω–µ handler (–≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑)

    ```python
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –í–ù–ï handler ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ
    import boto3
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table('users')

    def handler(event, context):
        # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π client
        return table.get_item(Key={'id': event['user_id']})
    ```

    **–ö–ª—é—á–µ–≤—ã–µ –ª–∏–º–∏—Ç—ã:**
    - Timeout: max 15 –º–∏–Ω—É—Ç
    - Memory: 128 MB ‚Äî 10 GB
    - Payload: 6 MB (sync), 256 KB (async)
    - Concurrent executions: 1000 (default, –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å)
    - /tmp storage: 512 MB ‚Äî 10 GB

    **Best practices:** stateless –∫–æ–¥, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ CloudWatch.

---

15. **SQS vs SNS vs EventBridge ‚Äî –∫–æ–≥–¥–∞ —á—Ç–æ**

    | –°–µ—Ä–≤–∏—Å | –ú–æ–¥–µ–ª—å | Retention | Use Case |
    |--------|--------|-----------|----------|
    | SQS | Queue (pull) | –î–æ 14 –¥–Ω–µ–π | –ó–∞–¥–∞—á–∏, –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
    | SNS | Pub/Sub (push) | –ù–µ—Ç | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, fan-out |
    | EventBridge | Event bus | –î–æ 24—á (archive) | Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |

    **SQS (Simple Queue Service):**
    ```python
    # Producer
    sqs.send_message(QueueUrl=url, MessageBody=json.dumps(task))

    # Consumer (pull)
    messages = sqs.receive_message(QueueUrl=url, MaxNumberOfMessages=10)
    for msg in messages['Messages']:
        process(msg)
        sqs.delete_message(QueueUrl=url, ReceiptHandle=msg['ReceiptHandle'])
    ```
    –ò—Å–ø–æ–ª—å–∑—É–π: background jobs, rate limiting, –±—É—Ñ–µ—Ä –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

    **SNS (Simple Notification Service):**
    - Push –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (Lambda, SQS, HTTP, email)
    - Fan-out: –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –º–Ω–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

    **EventBridge:**
    - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Å–æ–±—ã—Ç–∏—è (rules)
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SaaS (Zendesk, Auth0)
    - Schema Registry
    - –ò—Å–ø–æ–ª—å–∑—É–π: event-driven –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

16. **API Gateway: –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Lambda**

    **–¢–∏–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**

    **1. Lambda Proxy (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
    - API Gateway –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–µ—Å—å request –≤ Lambda
    - Lambda –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π response (statusCode, headers, body)
    ```python
    def handler(event, context):
        return {
            "statusCode": 200,
            "headers": {"Content-Type": "application/json"},
            "body": json.dumps({"message": "Hello"})
        }
    ```

    **2. Lambda Non-Proxy:**
    - Mapping templates (VTL) —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É—é—Ç request/response
    - –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ

    **–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**

    **REST API:**
    - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, WebSocket, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    - –î–æ—Ä–æ–∂–µ, –±–æ–ª—å—à–µ features

    **HTTP API:**
    - –ü—Ä–æ—â–µ, –¥–µ—à–µ–≤–ª–µ (–¥–æ 70%)
    - JWT authorizer –∏–∑ –∫–æ—Ä–æ–±–∫–∏
    - –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö API

    **Best practices:**
    - Throttling –∏ rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ API Gateway
    - Caching –¥–ª—è GET-–∑–∞–ø—Ä–æ—Å–æ–≤
    - Custom domain + Route 53
    - Authorizers (Lambda, Cognito, JWT)

---

17. **Step Functions: –∫–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å**

    **AWS Step Functions** ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ workflows –∏–∑ Lambda –∏ –¥—Ä—É–≥–∏—Ö AWS-—Å–µ—Ä–≤–∏—Å–æ–≤.

    **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
    - –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —à–∞–≥–∞–º–∏
    - –ù—É–∂–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è workflow
    - Long-running –ø—Ä–æ—Ü–µ—Å—Å—ã (–¥–æ 1 –≥–æ–¥–∞)
    - –¢—Ä–µ–±—É–µ—Ç—Å—è retry, error handling, branching
    - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

    **–ü—Ä–∏–º–µ—Ä workflow (ASL ‚Äî Amazon States Language):**
    ```json
    {
      "StartAt": "ValidateOrder",
      "States": {
        "ValidateOrder": {
          "Type": "Task",
          "Resource": "arn:aws:lambda:...:validate",
          "Next": "ProcessPayment",
          "Catch": [{"ErrorEquals": ["ValidationError"], "Next": "FailState"}]
        },
        "ProcessPayment": {
          "Type": "Task",
          "Resource": "arn:aws:lambda:...:payment",
          "Retry": [{"ErrorEquals": ["States.ALL"], "MaxAttempts": 3}],
          "End": true
        }
      }
    }
    ```

    **–ö–æ–≥–¥–∞ –ù–ï Step Functions:**
    - –ü—Ä–æ—Å—Ç–æ–π –ª–∏–Ω–µ–π–Ω—ã–π pipeline ‚Üí SQS + Lambda
    - Real-time < 1 —Å–µ–∫ latency ‚Üí direct Lambda calls
    - –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ (>1000/—Å–µ–∫) ‚Üí –¥–æ—Ä–æ–≥–æ

---

## üü° gRPC –∏ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

18. **gRPC vs REST: –∫–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å**

    | –ö—Ä–∏—Ç–µ—Ä–∏–π | REST | gRPC |
    |----------|------|------|
    | –ü—Ä–æ—Ç–æ–∫–æ–ª | HTTP/1.1 (JSON) | HTTP/2 (Protobuf) |
    | –†–∞–∑–º–µ—Ä payload | –ë–æ–ª—å—à–µ | –ú–µ–Ω—å—à–µ (~10x) |
    | –°–∫–æ—Ä–æ—Å—Ç—å | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ | –ë—ã—Å—Ç—Ä–µ–µ |
    | Streaming | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | Bi-directional |
    | Browser support | –î–∞ | –ß–µ—Ä–µ–∑ grpc-web |
    | –ö–æ–Ω—Ç—Ä–∞–∫—Ç | OpenAPI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | .proto (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
    | –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å | –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å | –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç |

    **–í—ã–±–∏—Ä–∞–π REST:**
    - –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
    - –ù—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤
    - –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –∑–Ω–∞–µ—Ç gRPC
    - –ü—Ä–æ—Å—Ç–æ–π CRUD

    **–í—ã–±–∏—Ä–∞–π gRPC:**
    - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
    - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, –≤–∞–∂–Ω–∞ latency
    - Streaming (real-time –¥–∞–Ω–Ω—ã–µ)
    - –°—Ç—Ä–æ–≥–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
    - Polyglot (—Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏)

    ```protobuf
    // user.proto
    service UserService {
      rpc GetUser(GetUserRequest) returns (User);
      rpc ListUsers(ListRequest) returns (stream User);  // streaming
    }
    ```

---

19. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã: sync vs async –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**

    **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (REST, gRPC):**
    ```
    Service A --request--> Service B
              <--response--
    ```
    **+** –ü—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
    **-** –°–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ—Ç–∫–∞–∑—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

    **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (–æ—á–µ—Ä–µ–¥–∏, —Å–æ–±—ã—Ç–∏—è):**
    ```
    Service A --publish--> Message Broker --consume--> Service B
    ```
    **+** –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
    **-** Eventual consistency, —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∫–∞

    **–ö–æ–≥–¥–∞ sync:**
    - –ù—É–∂–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
    - –ü—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è
    - UI —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

    **–ö–æ–≥–¥–∞ async:**
    - –î–æ–ª–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ—Ç–ø—Ä–∞–≤–∫–∞ email, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞)
    - Fan-out (–æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ ‚Üí –º–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
    - –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã (orders ‚Üí inventory, notifications)
    - –ü–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (–±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è)

    **–ü–∞—Ç—Ç–µ—Ä–Ω Saga** ‚Äî –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è:
    ```
    OrderCreated ‚Üí PaymentProcessed ‚Üí InventoryReserved ‚Üí OrderCompleted
                                   ‚Üì (failure)
                              CompensatingActions
    ```

---

20. **Circuit Breaker, Retry, Timeout**

    –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø—Ä–∏ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.

    **Timeout:**
    ```python
    response = requests.get(url, timeout=5)  # –ù–µ –∂–¥–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
    ```
    –ü—Ä–∞–≤–∏–ª–æ: timeout –∫–ª–∏–µ–Ω—Ç–∞ < timeout —Å–µ—Ä–≤–µ—Ä–∞

    **Retry —Å exponential backoff:**
    ```python
    from tenacity import retry, wait_exponential, stop_after_attempt

    @retry(wait=wait_exponential(min=1, max=10), stop=stop_after_attempt(3))
    def call_service():
        return requests.get(url)
    # –ü–æ–ø—ã—Ç–∫–∏: —Å—Ä–∞–∑—É, —á–µ—Ä–µ–∑ 1—Å–µ–∫, —á–µ—Ä–µ–∑ 2—Å–µ–∫, —á–µ—Ä–µ–∑ 4—Å–µ–∫...
    ```
    **–í–∞–∂–Ω–æ:** retry —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π!

    **Circuit Breaker:**
    ```
    CLOSED (–Ω–æ—Ä–º–∞) ‚Üí —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ ‚Üí OPEN (–æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã)
         ‚Üë                                       ‚Üì (–ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞)
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ —É—Å–ø–µ—Ö ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ HALF-OPEN (–ø—Ä–æ–±—É–µ—Ç)
    ```
    ```python
    from circuitbreaker import circuit

    @circuit(failure_threshold=5, recovery_timeout=30)
    def call_external_service():
        return requests.get(url)
    ```

    **Bulkhead** ‚Äî –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞), —á—Ç–æ–±—ã —Å–±–æ–π –æ–¥–Ω–æ–≥–æ –Ω–µ –ø–æ–≤–ª–∏—è–ª –Ω–∞ –¥—Ä—É–≥–∏–µ.

---

21. **Service Mesh: —á—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º**

    **Service Mesh** ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏. –ü—Ä–∏–º–µ—Ä—ã: Istio, Linkerd, AWS App Mesh.

    **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
    ```
    Service A ‚Üê‚Üí Sidecar Proxy ‚Üê‚Üí Sidecar Proxy ‚Üê‚Üí Service B
                     ‚Üì                   ‚Üì
                  Control Plane (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
    ```
    Sidecar proxy (Envoy) –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

    **–ß—Ç–æ –¥–∞—ë—Ç:**
    - **mTLS** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
    - **Traffic management** ‚Äî canary deployments, A/B testing, retries
    - **Observability** ‚Äî –º–µ—Ç—Ä–∏–∫–∏, traces, –ª–æ–≥–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
    - **Circuit breaking, rate limiting** ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ mesh
    - **Authorization** ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

    **–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω:**
    - –ú–Ω–æ–≥–æ (>20) –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
    - –ù—É–∂–Ω–∞ observability –±–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–æ–¥–∞
    - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (mTLS, RBAC)
    - –°–ª–æ–∂–Ω—ã–µ deployment-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

    **–ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–µ–Ω:**
    - –ú–∞–ª–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (overhead –Ω–µ –æ–ø—Ä–∞–≤–¥–∞–Ω)
    - –£–∂–µ –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—Ä–æ–¥–µ resilience4j)
    - –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞ –∫ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ Kubernetes + Service Mesh

---

## üü† BigData

22. **ETL vs ELT**

    **ETL (Extract ‚Üí Transform ‚Üí Load):**
    ```
    Sources ‚Üí Extract ‚Üí Transform (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä) ‚Üí Load ‚Üí Data Warehouse
    ```
    - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –î–û –∑–∞–≥—Ä—É–∑–∫–∏
    - –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥, on-premise DWH
    - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Informatica, Talend, SSIS

    **ELT (Extract ‚Üí Load ‚Üí Transform):**
    ```
    Sources ‚Üí Extract ‚Üí Load ‚Üí Data Warehouse/Lake ‚Üí Transform (–≤–Ω—É—Ç—Ä–∏ DWH)
    ```
    - –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
    - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–∏–ª–∞–º–∏ DWH (SQL, Spark)
    - Cloud-native: BigQuery, Snowflake, Redshift, Databricks

    **–ö–æ–≥–¥–∞ ETL:**
    - –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (PII) ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ–º –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏
    - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π storage –≤ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
    - Legacy —Å–∏—Å—Ç–µ–º—ã

    **–ö–æ–≥–¥–∞ ELT:**
    - –û–±–ª–∞—á–Ω—ã–µ DWH —Å –º–æ—â–Ω—ã–º–∏ compute
    - –ù—É–∂–Ω—ã —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
    - Data Lake –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
    - –ì–∏–±–∫–æ—Å—Ç—å (—Å—Ö–µ–º–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è)

    **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫:** Fivetran/Airbyte (Extract-Load) + dbt (Transform).

---

23. **Batch vs Streaming**

    **Batch Processing:**
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (—á–∞—Å, –¥–µ–Ω—å)
    - –í—ã—Å–æ–∫–∏–π throughput, –≤—ã—Å–æ–∫–∞—è latency
    - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Spark, Hadoop, AWS Glue

    **Stream Processing:**
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è (real-time)
    - –ù–∏–∑–∫–∞—è latency, —Å–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
    - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Kafka Streams, Flink, Kinesis

    | –ö—Ä–∏—Ç–µ—Ä–∏–π | Batch | Streaming |
    |----------|-------|-----------|
    | Latency | –ú–∏–Ω—É—Ç—ã-—á–∞—Å—ã | –°–µ–∫—É–Ω–¥—ã-–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã |
    | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ—â–µ | –°–ª–æ–∂–Ω–µ–µ |
    | State | –õ–µ–≥–∫–æ (–≤–µ—Å—å dataset) | –°–ª–æ–∂–Ω–æ (windowing) |
    | –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ job | Checkpointing |

    **Use Cases:**
    - Batch: –æ—Ç—á—ë—Ç—ã, ML training, ETL, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
    - Streaming: fraud detection, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

    **Lambda Architecture:** batch + streaming –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è. –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

    **Kappa Architecture:** —Ç–æ–ª—å–∫–æ streaming. –ü–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ Kafka –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

24. **Data Lake vs Data Warehouse**

    | –ö—Ä–∏—Ç–µ—Ä–∏–π | Data Warehouse | Data Lake |
    |----------|----------------|-----------|
    | –î–∞–Ω–Ω—ã–µ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ | –õ—é–±—ã–µ (raw) |
    | –°—Ö–µ–º–∞ | Schema-on-write | Schema-on-read |
    | –û–±—Ä–∞–±–æ—Ç–∫–∞ | SQL | SQL, Spark, ML |
    | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | –ê–Ω–∞–ª–∏—Ç–∏–∫–∏, BI | Data Scientists, Engineers |
    | Storage | –î–æ—Ä–æ–≥–æ–π | –î–µ—à—ë–≤—ã–π (S3) |
    | –ü—Ä–∏–º–µ—Ä—ã | Redshift, Snowflake | S3 + Athena, Databricks |

    **Data Warehouse:**
    - –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã
    - –ë—ã—Å—Ç—Ä—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã
    - –î–ª—è –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏

    **Data Lake:**
    - –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    - –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö use cases
    - –†–∏—Å–∫ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –≤ "data swamp" –±–µ–∑ governance

    **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî Lakehouse:**
    - –î–µ—à—ë–≤—ã–π storage –æ–∑–µ—Ä–∞ (S3, ADLS)
    - Transactional capabilities (Delta Lake, Iceberg)
    - SQL-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–∏–∑–∫–∞—è –∫ DWH
    - –ï–¥–∏–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è BI –∏ ML

---

## üü† –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö

25. **Big O: –∫–∞–∫ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å**

    **Big O** ‚Äî –æ—Ü–µ–Ω–∫–∞ —Ä–æ—Å—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏/–ø–∞–º—è—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

    | O | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
    |---|----------|--------|
    | O(1) | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | dict[key], array[i] |
    | O(log n) | –õ–æ–≥–∞—Ä–∏—Ñ–º | –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ |
    | O(n) | –õ–∏–Ω–µ–π–Ω–∞—è | –ü—Ä–æ—Ö–æ–¥ –ø–æ –º–∞—Å—Å–∏–≤—É |
    | O(n log n) | –õ–∏–Ω–µ–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∞—è | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (merge, quick) |
    | O(n¬≤) | –ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è | –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã |
    | O(2^n) | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è | –í—Å–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ |

    **–ö–∞–∫ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å:**
    ```python
    # O(n) ‚Äî –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥
    for x in arr: ...

    # O(n¬≤) ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã
    for x in arr:
        for y in arr: ...

    # O(n log n) ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    sorted(arr)

    # O(1) ‚Äî —Å–ª–æ–≤–∞—Ä—å
    d[key]
    ```

    **–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
    - O(n¬≤) ‚Üí O(n): –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hash table –≤–º–µ—Å—Ç–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    - O(n) ‚Üí O(log n): –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (–µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã)
    - O(n) ‚Üí O(1): –ø—Ä–µ–¥–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

    ```python
    # O(n¬≤) ‚Äî –ø–ª–æ—Ö–æ
    def has_duplicate(arr):
        for i, x in enumerate(arr):
            for j, y in enumerate(arr):
                if i != j and x == y:
                    return True

    # O(n) ‚Äî —Ö–æ—Ä–æ—à–æ
    def has_duplicate(arr):
        return len(arr) != len(set(arr))
    ```

---

26. **Hash Tables: –∫–æ–ª–ª–∏–∑–∏–∏, load factor**

    **Hash Table (dict –≤ Python)** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å O(1) –¥–æ—Å—Ç—É–ø–æ–º –ø–æ –∫–ª—é—á—É.

    **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
    ```
    key ‚Üí hash(key) ‚Üí index ‚Üí bucket ‚Üí value
    ```

    **–ö–æ–ª–ª–∏–∑–∏—è** ‚Äî –∫–æ–≥–¥–∞ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π hash/index.

    **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–ª–ª–∏–∑–∏–π:**
    - **Chaining:** –∫–∞–∂–¥—ã–π bucket ‚Äî linked list
    - **Open Addressing:** –∏—â–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å–≤–æ–±–æ–¥–Ω—É—é —è—á–µ–π–∫—É (linear/quadratic probing)

    **Load Factor = n / capacity**
    - –ß–µ–º –≤—ã—à–µ ‚Äî –±–æ–ª—å—à–µ –∫–æ–ª–ª–∏–∑–∏–π, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    - Python dict: –ø—Ä–∏ load factor ~0.66 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç resize (√ó2)

    **–ö–æ–≥–¥–∞ O(1) –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ O(n):**
    - –ü–ª–æ—Ö–∞—è hash-—Ñ—É–Ω–∫—Ü–∏—è (–≤—Å–µ –∫–ª—é—á–∏ –≤ –æ–¥–Ω–æ–º bucket)
    - –ê—Ç–∞–∫–∞ Hash DoS (—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏)

    ```python
    # Python dict ‚Äî –≤—ã—Å–æ–∫–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
    d = {}
    d["key"] = "value"  # O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º

    # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∫–∞–∫ –∫–ª—é—á–∏ ‚Äî –Ω—É–∂–µ–Ω __hash__ –∏ __eq__
    class Point:
        def __init__(self, x, y):
            self.x, self.y = x, y
        def __hash__(self):
            return hash((self.x, self.y))
        def __eq__(self, other):
            return (self.x, self.y) == (other.x, other.y)
    ```

---

27. **–ö–æ–≥–¥–∞ –∫–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ã–±—Ä–∞—Ç—å**

    | –û–ø–µ—Ä–∞—Ü–∏—è | Array/List | Linked List | Hash Table | Tree (BST) |
    |----------|------------|-------------|------------|------------|
    | –î–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É | O(1) | O(n) | ‚Äî | ‚Äî |
    | –ü–æ–∏—Å–∫ | O(n) | O(n) | O(1) | O(log n) |
    | –í—Å—Ç–∞–≤–∫–∞ –≤ –∫–æ–Ω–µ—Ü | O(1)* | O(1)** | O(1) | O(log n) |
    | –í—Å—Ç–∞–≤–∫–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É | O(n) | O(1)** | ‚Äî | O(log n) |
    | –£–¥–∞–ª–µ–Ω–∏–µ | O(n) | O(1)** | O(1) | O(log n) |
    | –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç | –î–∞ |

    *amortized **–µ—Å–ª–∏ –µ—Å—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–æ–∑–∏—Ü–∏—é

    **–í—ã–±–æ—Ä:**

    **Array/List (Python list):**
    - –ß–∞—Å—Ç—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É
    - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–ª–∏ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—â–∏–π—Å—è —Ä–∞–∑–º–µ—Ä

    **Hash Table (Python dict, set):**
    - –ß–∞—Å—Ç—ã–π –ø–æ–∏—Å–∫/–≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É
    - –ù–µ –Ω—É–∂–Ω–∞ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å
    - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (set)

    **Tree (TreeMap, OrderedDict):**
    - –ù—É–∂–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    - Range queries (–≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç A –¥–æ B)
    - –ß–∞—Å—Ç—ã–µ –≤—Å—Ç–∞–≤–∫–∏ + –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫

    **Heap (heapq):**
    - –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ min/max
    - Priority queue
    - Top-K —ç–ª–µ–º–µ–Ω—Ç–æ–≤

    ```python
    from collections import deque  # O(1) —Å –æ–±–æ–∏—Ö –∫–æ–Ω—Ü–æ–≤
    import heapq  # min-heap

    # Top 3 largest
    heapq.nlargest(3, items)
    ```

---

## üü† Design Patterns –∏ Security

28. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã ‚Äî –∫—Ä–∞—Ç–∫–æ**

    **S ‚Äî Single Responsibility:**
    –ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ–¥–Ω—É –ø—Ä–∏—á–∏–Ω—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è.
    ```python
    # –ü–ª–æ—Ö–æ: User –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∏ –¥–∞–Ω–Ω—ã–º–∏, –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π email
    # –•–æ—Ä–æ—à–æ: User + EmailService
    ```

    **O ‚Äî Open/Closed:**
    –û—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.
    ```python
    # –ü–ª–æ—Ö–æ: if type == "email": ... elif type == "sms": ...
    # –•–æ—Ä–æ—à–æ: NotificationStrategy —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ EmailStrategy, SMSStrategy
    ```

    **L ‚Äî Liskov Substitution:**
    –ü–æ–¥–∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–º–µ–Ω—è–µ–º—ã –Ω–∞ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –±–µ–∑ –ø–æ–ª–æ–º–∫–∏.
    ```python
    # –ü–ª–æ—Ö–æ: Square(Rectangle) –ª–æ–º–∞–µ—Ç setWidth/setHeight
    # –•–æ—Ä–æ—à–æ: –æ–±–∞ –Ω–∞—Å–ª–µ–¥—É—é—Ç Shape
    ```

    **I ‚Äî Interface Segregation:**
    –ú–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ª—É—á—à–µ –æ–¥–Ω–æ–≥–æ –æ–±—â–µ–≥–æ.
    ```python
    # –ü–ª–æ—Ö–æ: Worker —Å –º–µ—Ç–æ–¥–∞–º–∏ work(), eat(), sleep() –¥–ª—è —Ä–æ–±–æ—Ç–∞
    # –•–æ—Ä–æ—à–æ: Workable, Eatable ‚Äî —Ä–æ–±–æ—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ Workable
    ```

    **D ‚Äî Dependency Inversion:**
    –ó–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.
    ```python
    # –ü–ª–æ—Ö–æ: OrderService —Å–æ–∑–¥–∞—ë—Ç MySQLDatabase –≤–Ω—É—Ç—Ä–∏
    # –•–æ—Ä–æ—à–æ: OrderService(database: Database) ‚Äî –∏–Ω—ä–µ–∫—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ```

---

29. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã: Factory, Singleton, Strategy**

    **Factory ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞:**
    ```python
    class NotificationFactory:
        @staticmethod
        def create(type: str) -> Notification:
            if type == "email":
                return EmailNotification()
            elif type == "sms":
                return SMSNotification()
            raise ValueError(f"Unknown type: {type}")

    notification = NotificationFactory.create("email")
    ```
    **–ö–æ–≥–¥–∞:** –≤—ã–±–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ runtime, —Å–ª–æ–∂–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è.

    **Singleton ‚Äî –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    ```python
    class Database:
        _instance = None

        def __new__(cls):
            if cls._instance is None:
                cls._instance = super().__new__(cls)
            return cls._instance

    # –ò–ª–∏ –ø—Ä–æ—â–µ –≤ Python ‚Äî –º–æ–¥—É–ª—å —ç—Ç–æ singleton
    # database.py
    connection = create_connection()
    ```
    **–ö–æ–≥–¥–∞:** –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (config, –ª–æ–≥–≥–µ—Ä, –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π). **–û—Å—Ç–æ—Ä–æ–∂–Ω–æ:** –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

    **Strategy ‚Äî –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≤ runtime:**
    ```python
    class PaymentProcessor:
        def __init__(self, strategy: PaymentStrategy):
            self.strategy = strategy

        def process(self, amount):
            return self.strategy.pay(amount)

    processor = PaymentProcessor(CreditCardStrategy())
    processor.process(100)
    ```
    **–ö–æ–≥–¥–∞:** –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –∏–∑–±–µ–≥–∞–µ–º if-else.

---

30. **Security: SQL Injection, XSS, OWASP Top 10**

    **SQL Injection:**
    ```python
    # –ü–õ–û–•–û ‚Äî –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è
    query = f"SELECT * FROM users WHERE id = {user_id}"

    # –•–û–†–û–®–û ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    cursor.execute("SELECT * FROM users WHERE id = %s", (user_id,))

    # Django ORM ‚Äî –±–µ–∑–æ–ø–∞—Å–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    User.objects.filter(id=user_id)
    ```

    **XSS (Cross-Site Scripting):**
    ```python
    # –ü–õ–û–•–û ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ HTML
    return f"<div>{user_comment}</div>"

    # –•–û–†–û–®–û ‚Äî —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã –¥–µ–ª–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    from markupsafe import escape
    return f"<div>{escape(user_comment)}</div>"

    # Django/Jinja2 ‚Äî –∞–≤—Ç–æ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    ```

    **OWASP Top 10 (–∫–ª—é—á–µ–≤—ã–µ):**
    1. **Broken Access Control** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
    2. **Cryptographic Failures** ‚Äî HTTPS, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
    3. **Injection** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, ORM
    4. **Insecure Design** ‚Äî threat modeling, security requirements
    5. **Security Misconfiguration** ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏, debug –≤ –ø—Ä–æ–¥–µ
    6. **Vulnerable Components** ‚Äî –æ–±–Ω–æ–≤–ª—è–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Å–∫–∞–Ω–∏—Ä—É–π (Snyk)

    **Best Practices:**
    - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –ü—Ä–∏–Ω—Ü–∏–ø least privilege
    - Secrets –≤ environment variables / Secrets Manager
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ security-—Å–æ–±—ã—Ç–∏–π
    - Rate limiting

---

## üü° Payments Processing

31. **–ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π?**

    **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–∞—ë—Ç —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π: —Å–µ—Ç—å –º–æ–∂–µ—Ç –æ–±–æ—Ä–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–ø–∏—Å–∞–Ω–∏—è, –Ω–æ –¥–æ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É.

    **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Idempotency Key:**
    ```python
    @app.post("/payments")
    async def create_payment(
        payment: PaymentRequest,
        idempotency_key: str = Header()
    ):
        # 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å
        existing = await db.get(f"idempotency:{idempotency_key}")
        if existing:
            return existing  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

        # 2. –í—ã–ø–æ–ª–Ω—è–µ–º –ø–ª–∞—Ç—ë–∂
        result = await process_payment(payment)

        # 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å TTL (24-72 —á–∞—Å–∞)
        await db.setex(f"idempotency:{idempotency_key}", 86400, result)
        return result
    ```

    **Best practices:**
    - –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç UUID –¥–ª—è –∫–∞–∂–¥–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
    - –•—Ä–∞–Ω–∏ idempotency key + response –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ
    - –ò—Å–ø–æ–ª—å–∑—É–π database transaction –∏–ª–∏ distributed lock –¥–ª—è race conditions

---

32. **PCI DSS: –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–∞–º–∏**

    **PCI DSS (Payment Card Industry Data Security Standard)** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ —Ö—Ä–∞–Ω–∏—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç.

    **–£—Ä–æ–≤–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:**
    - Level 1: >6 –º–ª–Ω —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π/–≥–æ–¥ ‚Äî –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç
    - Level 4: <20k —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π/–≥–æ–¥ ‚Äî —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞

    **–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
    1. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç—å CVV** ‚Äî –Ω–∏–∫–æ–≥–¥–∞, –¥–∞–∂–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º
    2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ PAN** ‚Äî –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º (AES-256)
    3. **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è** ‚Äî –∑–∞–º–µ–Ω—è—Ç—å PAN –Ω–∞ —Ç–æ–∫–µ–Ω, —Ö—Ä–∞–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –æ—Ç–¥–µ–ª—å–Ω–æ
    4. **Network segmentation** ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç
    5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ –¥–æ—Å—Ç—É–ø—ã –∫ –¥–∞–Ω–Ω—ã–º –∫–∞—Ä—Ç
    6. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–∫–∞–Ω—ã** ‚Äî ASV scans, penetration testing

    **–ö–∞–∫ —É–ø—Ä–æ—Å—Ç–∏—Ç—å:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Stripe, Adyen) ‚Äî –æ–Ω–∏ –±–µ—Ä—É—Ç PCI compliance –Ω–∞ —Å–µ–±—è. –¢–≤–æ–π —Å–µ—Ä–≤–µ—Ä –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã.

    ```javascript
    // Stripe.js ‚Äî –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ Stripe
    const { paymentMethod } = await stripe.createPaymentMethod({
      type: 'card',
      card: cardElement  // Iframe –æ—Ç Stripe
    });
    // –ù–∞ –±—ç–∫–µ–Ω–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ paymentMethod.id
    ```

---

33. **–î–≤—É—Ö—Ñ–∞–∑–Ω—ã–π –∫–æ–º–º–∏—Ç –∏ Saga –¥–ª—è –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**

    –ö–æ–≥–¥–∞ –ø–ª–∞—Ç—ë–∂ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º (—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–∞), –Ω—É–∂–Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è.

    **Two-Phase Commit (2PC):**
    ```
    Coordinator ‚Üí Prepare ‚Üí –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥–æ—Ç–æ–≤—ã?
    Coordinator ‚Üí Commit/Rollback ‚Üí –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç/–æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç
    ```
    **–ü—Ä–æ–±–ª–µ–º—ã:** –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã, coordinator = single point of failure, –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.

    **Saga Pattern** ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏:
    ```
    1. CreateOrder (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: CancelOrder)
    2. ReserveInventory (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ReleaseInventory)
    3. ProcessPayment (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: RefundPayment)
    4. ShipOrder
    ```

    ```python
    # –ü—Ä–∏–º–µ—Ä Saga —Å —Å–æ–±—ã—Ç–∏—è–º–∏
    async def process_order_saga(order):
        try:
            await create_order(order)
            await reserve_inventory(order.items)
            await charge_payment(order.payment)
            await ship_order(order)
        except PaymentError:
            await release_inventory(order.items)  # –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è
            await cancel_order(order)
            raise
    ```

    **Choreography vs Orchestration:**
    - Choreography: —Å–µ—Ä–≤–∏—Å—ã —Å–ª—É—à–∞—é—Ç —Å–æ–±—ã—Ç–∏—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞ (—Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Å–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å)
    - Orchestration: —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (Step Functions, Temporal) —É–ø—Ä–∞–≤–ª—è–µ—Ç flow

---

## üü° Risk Management & Compliance

34. **Fraud Detection: –±–∞–∑–æ–≤—ã–µ –ø–æ–¥—Ö–æ–¥—ã**

    **Rule-based —Å–∏—Å—Ç–µ–º—ã:**
    ```python
    def check_fraud_rules(transaction):
        rules_triggered = []

        # Velocity checks
        if get_tx_count_last_hour(transaction.user_id) > 10:
            rules_triggered.append("high_velocity")

        # Amount threshold
        if transaction.amount > user.average_amount * 5:
            rules_triggered.append("unusual_amount")

        # Geo anomaly
        if transaction.country != user.usual_country:
            rules_triggered.append("geo_anomaly")

        # Device fingerprint
        if transaction.device_id not in user.known_devices:
            rules_triggered.append("new_device")

        return calculate_risk_score(rules_triggered)
    ```

    **ML-based –ø–æ–¥—Ö–æ–¥—ã:**
    - Supervised: –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö fraud/non-fraud —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
    - Unsupervised: anomaly detection (Isolation Forest, Autoencoders)
    - –ö–æ–º–±–∏–Ω–∞—Ü–∏—è: ML-–º–æ–¥–µ–ª—å + rules –¥–ª—è edge cases

    **–ú–µ—Ç—Ä–∏–∫–∏:** Precision (—Å–∫–æ–ª—å–∫–æ –∏–∑ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π fraud), Recall (—Å–∫–æ–ª—å–∫–æ fraud –ø–æ–π–º–∞–ª–∏), False Positive Rate (–ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã ‚Äî –ø–ª–æ—Ö–æ–π UX).

    **–ë–∞–ª–∞–Ω—Å:** —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ = –ø–æ—Ç–µ—Ä—è –∫–ª–∏–µ–Ω—Ç–æ–≤, —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∏–µ = –ø–æ—Ç–µ—Ä–∏ –æ—Ç fraud.

---

35. **KYC/AML: —á—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**

    **KYC (Know Your Customer)** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —É—Å–ª—É–≥.
    **AML (Anti-Money Laundering)** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç–º—ã–≤–∞–Ω–∏—è –¥–µ–Ω–µ–≥.

    **–¢–∏–ø–∏—á–Ω—ã–π KYC flow:**
    ```
    1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: –∏–º—è, –∞–¥—Ä–µ—Å, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç
    2. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞: OCR + liveness check (Onfido, Jumio)
    3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–∞–º: OFAC, EU, UN
    4. PEP screening: Politically Exposed Persons
    5. Risk scoring –∏ —Ä–µ—à–µ–Ω–∏–µ: approve / manual review / reject
    ```

    **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å:**
    ```python
    class KYCRecord(BaseModel):
        user_id: str
        verification_level: str  # basic, enhanced
        status: str  # pending, approved, rejected
        documents: List[str]  # —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
        sanctions_check_date: datetime
        risk_score: int
        # Retention: –æ–±—ã—á–Ω–æ 5-7 –ª–µ—Ç –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
    ```

    **Transaction Monitoring (AML):**
    - Unusual patterns: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Å—É–º–º—ã < –ø–æ—Ä–æ–≥–∞)
    - Suspicious Activity Reports (SAR) ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å
    - Risk-based approach: –±–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

    **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KYC-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (API), —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, audit trail –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.

---

## üü° System Integration

36. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: API, Events, ETL**

    **1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API (REST/gRPC):**
    ```
    System A --request--> System B
              <--response--
    ```
    - –ü—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
    - –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è: –∑–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—â–∏–µ –æ—Ç–≤–µ—Ç–∞
    - –ü—Ä–æ–±–ª–µ–º—ã: —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ—Ç–∫–∞–∑—ã

    **2. Event-Driven (Pub/Sub):**
    ```
    System A --publish--> Event Bus --subscribe--> System B, C, D
    ```
    - –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
    - –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, fan-out
    - –ü—Ä–æ–±–ª–µ–º—ã: eventual consistency, —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∫–∞

    **3. ETL/Batch:**
    ```
    System A --extract--> Staging --transform--> System B (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)
    ```
    - –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
    - –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è: –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –º–∏–≥—Ä–∞—Ü–∏–∏
    - –ü—Ä–æ–±–ª–µ–º—ã: –∑–∞–¥–µ—Ä–∂–∫–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

    **–í—ã–±–æ—Ä –ø–∞—Ç—Ç–µ—Ä–Ω–∞:**
    | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ü–∞—Ç—Ç–µ—Ä–Ω |
    |------------|---------|
    | –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç | API |
    | –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å | Events |
    | –ë–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã | ETL |
    | Real-time + –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å | Events + API fallback |

---

37. **–†–∞–±–æ—Ç–∞ —Å Legacy —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ API versioning**

    **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Legacy:**

    **Anti-Corruption Layer (ACL):**
    ```python
    # –ê–¥–∞–ø—Ç–µ—Ä, –∏–∑–æ–ª–∏—Ä—É—é—â–∏–π legacy –æ—Ç –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
    class LegacyPaymentAdapter:
        def __init__(self, legacy_client):
            self.legacy = legacy_client

        def process_payment(self, payment: Payment) -> PaymentResult:
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç legacy —Å–∏—Å—Ç–µ–º—ã
            legacy_request = {
                "CUST_NUM": payment.customer_id,
                "AMT": int(payment.amount * 100),  # Legacy —Ö—Ä–∞–Ω–∏—Ç –≤ —Ü–µ–Ω—Ç–∞—Ö
                "CCY": payment.currency.upper()
            }
            legacy_response = self.legacy.call("PROC_PAY", legacy_request)

            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç
            return PaymentResult(
                id=legacy_response["TX_ID"],
                status="success" if legacy_response["RC"] == "00" else "failed"
            )
    ```

    **API Versioning —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**

    ```python
    # 1. URL versioning (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    @app.get("/v1/users/{id}")
    @app.get("/v2/users/{id}")

    # 2. Header versioning
    @app.get("/users/{id}")
    async def get_user(id: int, api_version: str = Header(default="v1")):
        if api_version == "v2":
            return get_user_v2(id)
        return get_user_v1(id)
    ```

    **Deprecation policy:**
    - –û–±—ä—è–≤–∏—Ç—å deprecation –∑–∞—Ä–∞–Ω–µ–µ (6-12 –º–µ—Å—è—Ü–µ–≤)
    - `Deprecation` header –≤ –æ—Ç–≤–µ—Ç–∞—Ö
    - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
    - Sunset header —Å –¥–∞—Ç–æ–π –æ—Ç–∫–ª—é—á–µ–Ω–∏—è

---

38. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö**

    **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫:**
    ```python
    class RetryableError(Exception):
        """–ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å: —Ç–∞–π–º–∞—É—Ç, 503, network error"""
        pass

    class NonRetryableError(Exception):
        """–ù–µ–ª—å–∑—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å: 400, 401, 404, –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∞"""
        pass

    async def call_external_api(request):
        try:
            response = await client.post(url, json=request, timeout=5)
            if response.status_code == 503:
                raise RetryableError("Service unavailable")
            if response.status_code >= 400:
                raise NonRetryableError(f"Client error: {response.status_code}")
            return response.json()
        except httpx.TimeoutException:
            raise RetryableError("Timeout")
    ```

    **Retry —Å Dead Letter Queue:**
    ```python
    async def process_with_retry(message):
        for attempt in range(3):
            try:
                await process_message(message)
                return
            except RetryableError:
                await asyncio.sleep(2 ** attempt)  # Exponential backoff

        # –ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ ‚Äî –≤ DLQ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞
        await dlq.send(message)
    ```

    **Circuit Breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API:**
    ```python
    from circuitbreaker import circuit

    @circuit(failure_threshold=5, recovery_timeout=60)
    async def call_payment_provider(payment):
        return await payment_api.charge(payment)

    # –ü–æ—Å–ª–µ 5 –æ—à–∏–±–æ–∫ ‚Äî circuit –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 60 —Å–µ–∫
    # –ó–∞–ø—Ä–æ—Å—ã —Å—Ä–∞–∑—É –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É
    ```

    **Observability:** –ª–æ–≥–∏—Ä—É–π –≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å correlation_id, —Ç—Ä–µ–π—Å–∏ latency, –∞–ª–µ—Ä—Ç—ã –Ω–∞ —Ä–æ—Å—Ç –æ—à–∏–±–æ–∫.

---

## –ë–æ–Ω—É—Å: –ü–æ–ª–µ–∑–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

**–í–æ–ø—Ä–æ—Å—ã –∫ –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä—É:**
- –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞? –°–∫–æ–ª—å–∫–æ –±—ç–∫–µ–Ω–¥–µ—Ä–æ–≤?
- –ö–∞–∫–æ–π tech stack –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ? –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª–∏?
- –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∏–ø–∏—á–Ω—ã–π –¥–µ–Ω—å/—Å–ø—Ä–∏–Ω—Ç?
- –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç code review?
- –ö–∞–∫–∏–µ –≥–ª–∞–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ challenges —Å–µ–π—á–∞—Å?

**Red flags:**
- "–£ –Ω–∞—Å –Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤, –Ω–æ –ø–ª–∞–Ω–∏—Ä—É–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å"
- "–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã" (–¥–ª—è 3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- "–£ –Ω–∞—Å agile" (–Ω–æ —Å–ø—Ä–∏–Ω—Ç—ã –ø–æ 6 –Ω–µ–¥–µ–ª—å)
